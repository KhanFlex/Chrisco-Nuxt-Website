<template>
  <div id="inner-wrap" class="wrap hfeed kt-clear">
    <div id="primary" class="content-area">
      <div class="content-container site-container">
        <main id="main" class="site-main" role="main">
          <div class="content-wrap">
            <article
              id="post-557"
              class="entry content-bg single-entry post-footer-area-boxed post-557 page type-page status-publish hentry"
            >
              <div class="entry-content-wrap">
                <div class="entry-content single-content">
                  <div class="wp-block-kadence-rowlayout alignnone">
                    <div
                      id="kt-layout-id_3f31d1-79"
                      class="kt-row-layout-inner kt-row-has-bg kt-layout-id_3f31d1-79"
                    >
                      <div
                        class="kt-row-layout-overlay kt-row-overlay-normal"
                      ></div>
                      <div
                        class="kt-row-column-wrap kt-has-1-columns kt-gutter-default kt-v-gutter-default kt-row-valign-middle kt-row-layout-equal kt-tab-layout-inherit kt-m-colapse-left-to-right kt-mobile-layout-row"
                      >
                        <div
                          class="wp-block-kadence-column inner-column-1 kadence-column_22f8dc-e1"
                        >
                          <div class="kt-inside-inner-col">
                            <div class="wp-block-kadence-rowlayout alignnone">
                              <div
                                id="kt-layout-id_154f2b-30"
                                class="kt-row-layout-inner kt-layout-id_154f2b-30"
                              >
                                <div
                                  class="kt-row-column-wrap kt-has-1-columns kt-gutter-default kt-v-gutter-default kt-row-valign-top kt-row-layout-equal kt-tab-layout-inherit kt-m-colapse-left-to-right kt-mobile-layout-row"
                                >
                                  <div
                                    class="wp-block-kadence-column inner-column-1 kadence-column_e43725-b0"
                                  >
                                    <div class="kt-inside-inner-col">
                                      <h2
                                        class="kt-adv-heading_a983f0-b3 wp-block-kadence-advancedheading has-theme-palette-9-color has-text-color"
                                        data-kb-block="kb-adv-heading_a983f0-b3"
                                      >
                                        Get In Touch
                                      </h2>

                                      <p
                                        class="kt-adv-heading_2efcf5-a5 wp-block-kadence-advancedheading has-theme-palette-9-color has-text-color"
                                        data-kb-block="kb-adv-heading_2efcf5-a5"
                                      >
                                        We'll try and get back to you as soon as
                                        possible for any inquiries.
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="wp-block-kadence-rowlayout alignnone">
                              <div
                                id="kt-layout-id_5af567-e7"
                                class="kt-row-layout-inner kt-row-has-bg kt-layout-id_5af567-e7 has-theme-palette-3-background-color"
                              >
                                <div
                                  class="kt-row-column-wrap kt-has-3-columns kt-gutter-none kt-v-gutter-default kt-row-valign-middle kt-row-layout-equal kt-tab-layout-last-row kt-m-colapse-left-to-right kt-mobile-layout-row kt-custom-first-width-40 kt-custom-second-width-40 kt-custom-third-width-20"
                                >
                                  <div
                                    class="wp-block-kadence-column inner-column-1 kadence-column_a30b23-2d"
                                  >
                                    <div class="kt-inside-inner-col">
                                      <div
                                        id="kt-info-box_efeaa1-5a"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-left kt-info-halign-left kb-info-box-vertical-media-align-top kb-info-mobile-halign-center"
                                          ><div
                                            class="kt-blocks-info-box-media-container"
                                          >
                                            <div
                                              class="kt-blocks-info-box-media kt-info-media-animate-none"
                                            >
                                              <div
                                                class="kadence-info-box-icon-container kt-info-icon-animate-none"
                                              >
                                                <div
                                                  class="kadence-info-box-icon-inner-container"
                                                >
                                                  <span
                                                    style="
                                                      display: block;
                                                      justify-content: center;
                                                      align-items: center;
                                                    "
                                                    class="kt-info-svg-icon kt-info-svg-icon-fas_calendar-check"
                                                    ><svg
                                                      style="
                                                        display: inline-block;
                                                        vertical-align: middle;
                                                      "
                                                      viewBox="0 0 448 512"
                                                      height="15"
                                                      width="15"
                                                      fill="currentColor"
                                                      xmlns="http://www.w3.org/2000/svg"
                                                      aria-hidden="true"
                                                    >
                                                      <path
                                                        d="M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"
                                                      ></path></svg
                                                  ></span>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="kt-infobox-textcontent">
                                            <h3
                                              class="kt-blocks-info-box-title"
                                            >
                                              MON – FRI (8:00-20:00)
                                            </h3>
                                            <p class="kt-blocks-info-box-text">
                                              Opening Hours
                                            </p>
                                          </div></a
                                        >
                                      </div>
                                    </div>
                                  </div>

                                  <div
                                    class="wp-block-kadence-column inner-column-2 kadence-column_22e425-97"
                                  >
                                    <div class="kt-inside-inner-col">
                                      <div
                                        id="kt-info-box_41e20d-d7"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-left kt-info-halign-left kb-info-box-vertical-media-align-top kb-info-mobile-halign-center"
                                          ><div
                                            class="kt-blocks-info-box-media-container"
                                          >
                                            <div
                                              class="kt-blocks-info-box-media kt-info-media-animate-none"
                                            >
                                              <div
                                                class="kadence-info-box-icon-container kt-info-icon-animate-none"
                                              >
                                                <div
                                                  class="kadence-info-box-icon-inner-container"
                                                >
                                                  <span
                                                    style="
                                                      display: block;
                                                      justify-content: center;
                                                      align-items: center;
                                                    "
                                                    class="kt-info-svg-icon kt-info-svg-icon-fe_phone"
                                                    ><svg
                                                      style="
                                                        display: inline-block;
                                                        vertical-align: middle;
                                                      "
                                                      viewBox="0 0 24 24"
                                                      height="15"
                                                      width="15"
                                                      fill="none"
                                                      stroke="currentColor"
                                                      xmlns="http://www.w3.org/2000/svg"
                                                      stroke-width="2"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round"
                                                      aria-hidden="true"
                                                    >
                                                      <path
                                                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                                                      ></path></svg
                                                  ></span>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="kt-infobox-textcontent">
                                            <h3
                                              class="kt-blocks-info-box-title"
                                            >
                                              0705-927-516
                                            </h3>
                                            <p class="kt-blocks-info-box-text">
                                              Give us a call directly
                                            </p>
                                          </div></a
                                        >
                                      </div>
                                    </div>
                                  </div>

                                  <div
                                    class="wp-block-kadence-column inner-column-3 kadence-column_6eb62a-13"
                                  >
                                    <div class="kt-inside-inner-col">
                                      <div
                                        class="wp-block-kadence-advancedbtn kt-btn-align-right kt-btn-tablet-align-inherit kt-btn-mobile-align-center kt-btns-wrap kt-btns_85b4b4-35"
                                      >
                                        <div class="kt-btn-wrap kt-btn-wrap-0">
                                          <a
                                            href="mailto:citychurchchrisco@gmail.com"
                                            class="kt-button button kt-btn-0-action kt-btn-size-standard kt-btn-style-basic kt-btn-svg-show-always kt-btn-has-text-true kt-btn-has-svg-false kb-btn-global-inherit wp-block-button__link"
                                            ><span class="kt-btn-inner-text"
                                              >Write to us</span
                                            ></a
                                          >
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="wp-block-kadence-rowlayout alignnone">
                    <div
                      id="kt-layout-id_6482de-65"
                      class="kt-row-layout-inner kt-row-has-bg kt-layout-id_6482de-65"
                    >
                      <div
                        class="kt-row-layout-overlay kt-row-overlay-normal"
                      ></div>
                      <div
                        class="kt-row-column-wrap kt-has-1-columns kt-gutter-default kt-v-gutter-default kt-row-valign-top kt-row-layout-equal kt-tab-layout-inherit kt-m-colapse-left-to-right kt-mobile-layout-row"
                      >
                        <div
                          class="wp-block-kadence-column inner-column-1 kadence-column_a5e40c-20"
                        >
                          <div class="kt-inside-inner-col">
                            <div class="wp-block-kadence-rowlayout alignnone">
                              <div
                                id="kt-layout-id_6ff878-51"
                                class="kt-row-layout-inner kt-layout-id_6ff878-51"
                              >
                                <div
                                  class="kt-row-column-wrap kt-has-2-columns kt-gutter-none kt-v-gutter-none kt-row-valign-middle kt-row-layout-equal kt-tab-layout-row kt-m-colapse-left-to-right kt-mobile-layout-row kt-custom-first-width-41.3 kt-custom-second-width-58.7 kt-inner-column-height-full"
                                >
                                  <div
                                    class="wp-block-kadence-column inner-column-1 kadence-column_548fc1-fd"
                                  >
                                    <div
                                      class="kt-inside-inner-col"
                                      style="background: var(--global-palette9)"
                                    >
                                      <h2
                                        class="kt-adv-heading_87a997-ec wp-block-kadence-advancedheading"
                                        data-kb-block="kb-adv-heading_87a997-ec"
                                      >
                                        How to Find Us
                                      </h2>

                                      <div
                                        id="kt-info-box_f12400-e7"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-top kt-info-halign-left kb-info-tablet-halign-center kb-info-mobile-halign-center"
                                          ><div class="kt-infobox-textcontent">
                                            <h4
                                              class="kt-blocks-info-box-title"
                                            >
                                              OUR ADDRESS​
                                            </h4>
                                            <p class="kt-blocks-info-box-text">
                                              Kitisuru off Kinanda Road
                                            </p>
                                          </div></a
                                        >
                                      </div>

                                      <div
                                        id="kt-info-box_d5963f-b9"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-top kt-info-halign-left kb-info-tablet-halign-center kb-info-mobile-halign-center"
                                          ><div class="kt-infobox-textcontent">
                                            <h4
                                              class="kt-blocks-info-box-title"
                                            >
                                              EMAIL US​
                                            </h4>
                                            <p class="kt-blocks-info-box-text">
                                              citychurchchrisco@gmail.com​
                                            </p>
                                          </div></a
                                        >
                                      </div>

                                      <div
                                        id="kt-info-box_d606a5-0b"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-top kt-info-halign-left kb-info-tablet-halign-center kb-info-mobile-halign-center"
                                          ><div class="kt-infobox-textcontent">
                                            <h4
                                              class="kt-blocks-info-box-title"
                                            >
                                              OPENING HOURS​
                                            </h4>
                                            <p class="kt-blocks-info-box-text">
                                              Mon – Fri (8:00-20:00)
                                            </p>
                                          </div></a
                                        >
                                      </div>

                                      <div
                                        id="kt-info-box_dc244e-38"
                                        class="wp-block-kadence-infobox"
                                      >
                                        <a
                                          class="kt-blocks-info-box-link-wrap info-box-link kt-blocks-info-box-media-align-top kt-info-halign-left kb-info-tablet-halign-center kb-info-mobile-halign-center"
                                          ><div class="kt-infobox-textcontent">
                                            <h4
                                              class="kt-blocks-info-box-title"
                                            >
                                              CALL US​
                                            </h4>
                                            <p class="kt-blocks-info-box-text">
                                              0705-927-516
                                            </p>
                                          </div></a
                                        >
                                      </div>
                                    </div>
                                  </div>

                                  <div
                                    class="wp-block-kadence-column inner-column-2 kadence-column_434c8b-91"
                                  >
                                    <div
                                      class="kt-inside-inner-col"
                                      style="
                                        background: var(--global-palette9);
                                        position: relative;
                                      "
                                    >
                                      <div
                                        class="wp-block-kadence-form kadence-form-_d54263-7f kb-form-wrap"
                                      >
                                        <form class="kb-form">
                                          <div
                                            class="kadence-blocks-form-field kb-form-field-2 kb-field-desk-width-100 kb-input-size-standard"
                                          >
                                            <label for="kb_field__d54263-7f_0"
                                              >Your Name
                                              <span class="required"
                                                >*</span
                                              ></label
                                            >
                                            <input
                                              name="kb_field_0"
                                              id="kb_field__d54263-7f_0"
                                              data-label="Name"
                                              type="text"
                                              placeholder="Name"
                                              v-model="name"
                                              data-type="text"
                                              class="kb-field kb-text-style-field kb-text-field kb-field-0"
                                            />
                                            <div
                                              v-if="errors.name"
                                              id="kb_field_2-error"
                                              class="kb-form-error-msg kadence-blocks-form-warning"
                                              role="alert"
                                            >
                                              {{ errors.name }}
                                            </div>
                                          </div>

                                          <div
                                            class="kadence-blocks-form-field kb-form-field-2 kb-field-desk-width-100 kb-input-size-standard"
                                          >
                                            <label for="kb_field__d54263-7f_2"
                                              >Email Address
                                              <span class="required"
                                                >*</span
                                              ></label
                                            ><input
                                              v-model="email"
                                              name="kb_field_2"
                                              id="kb_field__d54263-7f_2"
                                              data-label="Email Address"
                                              type="email"
                                              placeholder="Email Address"
                                              data-type="email"
                                              class="kb-field kb-text-style-field kb-email-field kb-field-2"
                                              data-required="yes"
                                            />
                                            <div
                                              v-if="errors.email"
                                              id="kb_field_2-error"
                                              class="kb-form-error-msg kadence-blocks-form-warning"
                                              role="alert"
                                            >
                                              {{ errors.email }}
                                            </div>
                                          </div>
                                          <div
                                            class="kadence-blocks-form-field kb-form-field-3 kb-field-desk-width-100 kb-input-size-standard"
                                          >
                                            <label for="kb_field__d54263-7f_3"
                                              >Subject
                                              <span class="required"
                                                >*</span
                                              ></label
                                            ><input
                                              name="kb_field_3"
                                              id="kb_field__d54263-7f_3"
                                              data-label="Subject"
                                              type="text"
                                              placeholder="Subject"
                                              v-model="subject"
                                              data-type="text"
                                              class="kb-field kb-text-style-field kb-text-field kb-field-3"
                                            />
                                            <div
                                              v-if="errors.subject"
                                              id="kb_field_2-error"
                                              class="kb-form-error-msg kadence-blocks-form-warning"
                                              role="alert"
                                            >
                                              {{ errors.subject }}
                                            </div>
                                          </div>
                                          <div
                                            class="kadence-blocks-form-field kb-form-field-4 kb-field-desk-width-100 kb-input-size-standard"
                                          >
                                            <label for="kb_field__d54263-7f_4"
                                              >Your Message
                                              <span class="required"
                                                >*</span
                                              ></label
                                            ><textarea
                                              name="kb_field_4"
                                              id="kb_field__d54263-7f_4"
                                              data-label="Your Message"
                                              type="textarea"
                                              placeholder="Your Message"
                                              data-type="textarea"
                                              class="kb-field kb-text-style-field kb-textarea-field kb-field-4"
                                              rows="4"
                                              data-required="yes"
                                              v-model="message"
                                            ></textarea>
                                            <div
                                              v-if="errors.message"
                                              id="kb_field_2-error"
                                              class="kb-form-error-msg kadence-blocks-form-warning"
                                              role="alert"
                                            >
                                              {{ errors.message }}
                                            </div>
                                          </div>

                                          <div
                                            class="kadence-blocks-form-field kb-submit-field kb-field-desk-width-100"
                                          >
                                            <button
                                              @click.prevent="submitForm"
                                              class="kb-forms-submit button kb-button-size-standard kb-button-width-auto"
                                            >
                                              Submit Form
                                            </button>
                                          </div>
                                        </form>
                                        <div
                                          v-if="showSuccess"
                                          class="kadence-blocks-form-message kadence-blocks-form-success"
                                        >
                                          Submission Success, Thanks for getting
                                          in touch!
                                        </div>

                                        <div
                                          v-if="showError"
                                          class="kadence-blocks-form-message kadence-blocks-form-warning"
                                        >
                                          Unable to send message. Please try
                                          again later
                                        </div>

                                        <div
                                          v-if="sending"
                                          class="kb-form-loading"
                                        >
                                          <div class="kb-form-loading-spin">
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div
                              class="wp-block-kadence-rowlayout alignnone"
                            ></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    style="
                      -webkit-filter: grayscale(100%);
                      filter: grayscale(100%);
                    "
                  >
                    <iframe
                      src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3988.9030591901906!2d36.77089!3d-1.227275!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f19346bc651df%3A0x5381cfeb0f83e5ea!2sChrisco%20City%20Church%20Kitusuru!5e0!3m2!1sen!2sus!4v1689034812378!5m2!1sen!2sus"
                      width="2400"
                      height="400"
                      style="border: 0; display: block"
                      allowfullscreen=""
                      loading="lazy"
                    ></iframe>
                  </div>
                </div>
                <!-- .entry-content -->
              </div>
            </article>
            <!-- #post-557 -->
          </div>
        </main>
        <!-- #main -->
      </div>
    </div>
    <!-- #primary -->
  </div>
</template>

<script setup>
useHead({
  title: "Contact Us",
});

const name = ref("");
const email = ref("");
const subject = ref("");
const message = ref("");
const sending = ref(false);
const showError = ref(false);
const showSuccess = ref(false);
const errors = ref({});

const isValidEmail = (email) => {
  if (!email.length) return false;
  const emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;
  return emailRegex.test(email);
};

const submitForm = async () => {
  // reset error object
  errors.value = {};

  if (!name.value.length < 2) {
    errors.value.name = "Your name is required.";
  }
  if (!isValidEmail(email.value)) {
    errors.value.email = "Email address is required";
  }
  if (!message.value) {
    errors.value.message = "Message is required";
  }
  if (!subject.value) {
    errors.value.subject = "Subject is required";
  }

  if (
    name.value.length > 2 &&
    isValidEmail(email.value) &&
    message.value &&
    subject.value
  ) {
    try {
      sending.value = true;

      const formData = {
        name: name.value,
        email: email.value,
        message: message.value,
        subject: subject.value,
      };

      const res = await $fetch("/api/mail", {
        method: "post",
        body: formData,
      });

      showSuccess.value = true;
    } catch (error) {
      showError.value = true;
    } finally {
      name.value = "";
      subject.value = "";
      message.value = "";
      email.value = "";
      sending.value = false;
      errors.value = {};

      setTimeout(() => {
        showError.value = showSuccess.value = false;
      }, 3000);
    }
    return;
  }
};
</script>

<style lang="css" scoped>
@import "@/assets/css/contact.css";

.kb-form .kadence-blocks-form-field .kb-forms-submit {
  background: rgba(7, 27, 56, 1) !important;
}

button,
.button,
.wp-block-button__link,
.wp-element-button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  background: rgba(205, 43, 37, 1) !important;
}

#kt-info-box_efeaa1-5a .kt-blocks-info-box-title {
  color: white;
}

#kt-info-box_41e20d-d7 .kt-blocks-info-box-title {
  color: white;
}

#kt-info-box_efeaa1-5a
  .kt-blocks-info-box-link-wrap:hover
  .kt-blocks-info-box-media {
  color: var(--global-palette9, #ffffff);
  background: rgba(205, 43, 37, 1) !important;
  border-color: #eeeeee;
}

#kt-info-box_41e20d-d7
  .kt-blocks-info-box-link-wrap:hover
  .kt-blocks-info-box-media {
  color: var(--global-palette9, #ffffff);
  background: rgba(205, 43, 37, 1) !important;
  border-color: #eeeeee;
}
</style>
